FROM continuumio/miniconda3:4.12.0
ADD ./requirements.dev.txt  /tmp/requirements.txt

RUN apt-get update
RUN apt-get install -y --no-install-recommends \
    build-essential gfortran libgdal-dev cmake git vim curl
ENV LANG pt_BR.UTF-8

RUN conda init bash
RUN conda create -n deploy python=3.8
RUN echo "conda activate deploy" >> ~/.bashrc
SHELL ["/bin/bash", "-c"]

RUN source ~/.bashrc && pip3 install --no-cache-dir -r /tmp/requirements.txt